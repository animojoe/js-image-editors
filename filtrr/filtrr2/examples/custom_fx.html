<html>
    <head>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"/></script>
        <script type="text/javascript" src="../src/filtrr2.js"></script>
        <script type="text/javascript" src="../src/layers.js"></script>
        <script type="text/javascript" src="../src/effects.js"></script>
        <script type="text/javascript" src="../src/events.js"></script>
        <script type="text/javascript" src="../src/util.js"></script>   
    </head>
    <body>
        <img src="megan_fox.jpg"/>
        <img id="img" src="megan_fox.jpg"/>
        <script type="text/javascript">

            // Register an effect named 'boostRed'. Has to be called
            // before we construct a Filtrr2 object otherwise it 
            // won't be available in the ImageProcessor.
            Filtrr2.fx('boostRed', function(p) {
    
                // clamp() is a utility method which forces a value
                // to be between a specified range.
                // Here we are forcing p to be between [0, 100].
                p = Filtrr2.Util.clamp(p, 0, 100);

                this.process(function(rgba) {

                    // This is getting called on every pixel in the image.
                    rgba.r += p;   
                    rgba.g -= 30;
                    rgba.b -= 50;
                     
                });

            });

            // boostRed() will now be a method in the ImageProcessor.
            Filtrr2("#img", function() {

                this.boostRed(50).render();

            });

        </script>
    </body>
</html>